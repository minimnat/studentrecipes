<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Database Example</title>
</head>
<body>

	<div id='cars'></div>

	<script id='myTemplate' type='text/ractive'>
    	{{#recipelist}}
			<p>{{id}},{{type}},{{title}},{{recipe}}!</p>
		{{/carlist}}
	</script>

	<!--<script src='Ractive.min.js'></script>-->

	<script>

		//open database
		var db = openDatabase('mydb4', '1.0', 'my first database', 2 * 1024 * 1024);
		
		db.transaction(function (tx) {
  			tx.executeSql('CREATE TABLE recipe (id UNIQUE, type TEXT, title TEXT, recipe BLOB)');
		
		var recipe=new Object ();
			recipe.id = 1;
			recipe.type ="Chicken";
			recipe.title ="Black Bean Stir-Fry";
			recipe.ingredients = ["Skinless chicken breasts 2 large, cut into chunks", "Groundnut oil 1tbsp", "Red pepper 1 deseeded and sliced", 						"Yellow pepper 1 deseeded and sliced","Chinese black bean sauce 2 tbsp", "Light soy sauce 1 tbsp","Chicken stock 60ml", "Cornflour 2 tsp","Cooked 	long grain rice 250g (optional)"];
			recipe.instructions = ["To make the marinade combine ingredients." , " Mix all ingredients into bowl." , "Add chicken and mix until 	covered all over.", "Put into refrigerator for 15-20 minutes.", "Ready to cook." , "Heat the oil in a wok or large frying pan." ," Once hot add chicken and stir for 4-5 minutes.", " When golden, remove from wok or frying pan.","Adding the peppers to the wok or frying pan." , "Brisk heat 	for 3 minutes.", "Return chicken to wok or frying pan, add black bean sauce. Cook for another 2 minutes." , "Combine soy sauce, chicken stock, cornflour in a bowl, adding 2 tbsp of water. Pour into wok or frying pan.", "Simmer gently for 3 minutes, until sauce is thick." , "Serve with rice."];
		
			
			var recipe=new Object ();
			recipe.id = 2;
			recipe.type ="Chicken";
			recipe.title ="Curried Chicken";
			recipe.ingredients = ["Olive oil 1 tbsp" ,"Onion 1 peeled and chopped", "Skinless chicken fillets diced","Korma curry paste 1-3 tbsp",									"Double cream 4 tbsp" ,"Mango 1 peeled, stoned and diced"];
			recipe.instructions = ["Heat 1 table spoon of oil in a large frying pan.","Add onion and cook for 5 minutes, until softened.",
"Add chicken, more oil if needed.","Continue cooking for another 5 minutes, stir often.","Stir in curry paste, including 3-4 tbsp of water.",
"Continue for another 5 mintues.","Add cream, continue cooking until sauce is thick and chicken is cooked.",
"Stir in mango after taking pan off the heat."];
			
					
							
		var recipe=new Object ();
			recipe.id = 3;
			recipe.type ="Pork";
			recipe.title ="Sausage Casserole";
			recipe.ingredients = ["Sausages 16","Passata 1 jar or 2 cartons" ,"Baked beans 2 Cans", "Sprinkling of chilli powder",
			"Garlic 1-2 chopped","Onions 1 chopped","Sprinkling of black pepper" ,"Sugar 1 ts"];
			recipe.instructions = ["Peel and dice onions.","Peel and thinly slice garlic.","Either heat sausages in a frying pan with oil and  	onions and garlic." ,"Or bake sausages, brushing with a fair bit of oil, place the onions and garlic on top, and bake for about 20 mins on medium heat." ,"Pour passata and beans into a large casserole dish.","Sprinkle chilli and pepper to taste.", "Spoon sugar, then add mustard if required, and stir it all up.","Remove onions, garlic and sausages from the oven.","Spoon saucy mix.","Put lid on dish, and bake at medium heat for an hour.", "Option to serve with mashed potato."];
			
		
			var recipe=new Object ();
			recipe.id = 4;
			recipe.type ="Pork";
			recipe.title ="Pork Noodles";
			recipe.ingredients = ["Chinese egg noodles 335g", "Soy sauce 3 tbsp", "Thai sweet chilli sauce 180ml","Garlic granules 1/2 ts",
"Ground ginger 1/4 ts","Sesame oil 3tbsp","Soy sauce 120m","Garlic granules 1/2 ts","Pork fillet, cut into strips 1 (450g)","Vegatable oil 2tbsp","Onions 2, chopped","Pinch crushed chilli flakes","Thai sweet chilli sauce 3tbsp","Savoy cabbage 1/2","Stalks celery 4, sliced","Carrots 2, sliced","Red peppers 3 chopped","Cornflour 2 ts","Cold water 4tbsp"];
			recipe.instructions = ["Fill a large pot salted water and bring to a rolling boil.","Stir in the Chinese noodles, and return to the boil.","Cook the noodles uncovered, stirring occasionally.","Drain well.", "Whisk together the 3 tablespoons soy sauce, 180ml sweet chilli sauce, 1/2 teaspoon garlic granules, the ground ginger and the sesame oil in a large bowl.","Add noodles and toss to coat.","Whisk together the 120ml soy sauce and 1/2 teaspoon garlic granules in a large bowl,add the pork and stir to coat.","Allow to marinate for 5 minutes.","Heat the cooking oil in a wok or a large, deep frying pan over medium-high heat.","Add the pork, onions, and crushed chilli flakes to the oil.","Stir in 3 tablespoons sweet chilli sauce, cabbage, celery, carrots and peppers.", "Whisk together the cornflour and water and add to the stir fry, stirring until the mixture thickens.","Serve the stir-fry over the noodles."];
			
			var recipe=new Object ();
			recipe.id = 5;
			recipe.type ="Lamb";
			recipe.title ="Baked Pasta Dish";
			recipe.ingredients = ["Lean minced lamb 450g", "Lean minced beef steak 450g", "Rashers smoked bacon","Large Spanish onions, 2 chopped","Plum tomatoes 3 chopped","Fresh basil","Red chillies, 2-3 finely chopped","Sun-dried tomatoes in olive oil 250g","Freshly ground pepper 2tsp","Sea salt", " Cayenned pepper 1/2tsp", "Hot paprika 1tsp", "Pasta", "Uncooked penne pasta, 225g"];
			recipe.instructions = ["Topping (4-6 handfuls) grated mozarella cheese,(2-3 handfuls) quality Parmesan","Pre-heat oven to 230C","For the Sauce: In a large stock pot.","Place 3 tbsp olive oil.","Fry the minced lamb and beef, onions, bacon and chillies until the meat is brown. ", "Drain off any excess fat.","Add sun-dried tomatoes, spices and 3/4 of the basil.","Stir to combine and saute 3 minutes stirring occasionally.","Add chopped tomatoes and tomato puree.","Fill one of the tomato tins with water and add sauce.", "Simmer for 45-60 minutes until the tomato sauce is thick.","Divide sauce into 5 portions. Keep one portion out and freeze the rest.","Cook pasta.","Drain well and add 1 x tsp tomato puree, 1 x tbs olive oil.","Stir to combine.","Stir to combine.","Top evenly with parmesan first and then the mozarella.","Bake in oven until mozarella browned."];
			
		
			var recipe=new Object ();
			recipe.id = 6;
			recipe.type ="Lamb";
			recipe.title ="Shepherd's Pie";
			recipe.ingredients = ["Large potatoes, cubed", "Butter 1tbsp", "Larger onion 1 finely chopped","Grated cheddar cheese 120g divided","Salt & pepper to taste","Olive oil 1tbsp","Carrots 3 chopped","Minced		 lamb 450g","Plain flour 2tbsp","Lamb stock 250ml"];
			recipe.instructions = ["Large pot of water to the boil.","Add potatoes, cook until tender, about 15 minutes.","Drain and mash.","Mix in butter, 1 or 2 tablespoons of finely chopped onion and half of the grated cheese.","Preheat oven to 190C.", "Heat oil in a large frying pan.","Add remaining onion and diced carrots","Add lamb and cook until well browned.","Stir in flour and cook 1 minute.","Add lamb stock adn bring boil.Simmner for 5 minutes.", "Spread the lamb mixture in an even layer.","Top with the mash potato." , "Sprinkle grated cheese." ,"Bake in the preheated oven for 20 minutes."];
			
	
			var recipe=new Object ();
			recipe.id = 7;
			recipe.type ="Beef";
			recipe.title ="Beef burgers";
			recipe.ingredients = ["Ground beef 1-2lbs", "Egg 1", "Onion soup mix 1 pack","Greaseproof paper or non-stick tray"];
			recipe.instructions = ["Use ground beef to create burgers.","Break ground beef into sections.","Form ground beef into small burger shapes, using your hands.","Place burger shapes onto greased baking tray.","Cook for 20-25 minutes at 400 degrees, ensuring flipping at least once.","Side options could be chips or salad.","Recipe can be adapted into meatballs, using a type of tomato sauce."];
			

			var recipe=new Object ();
			recipe.id = 8;
			recipe.type ="Beef";
			recipe.title ="Beef Stiry-Fry";
			recipe.ingredients = ["Asian rice noodles 5 cups", "Stir fry beef 3 cups", "Zucchini, 1 chopped","Carrots 2 large, chopped", "Bean sprouts 1 pack", "Onion 1 chopped", "Soy sauce 5tbsp","Hoi sin sauce (Optional)","Cooking Equipment:", "2 large cooking pans","1 cooking pot"];
			recipe.instructions = ["Cut the beef up into small strips.","Use first cooking pan.","Stove on medium heat.","Stir up beef until brown and then set aside.","Fill up other pot up with water and set on high.","Cook the noodles in boiling water. ","Dice the onion, quarter the zucchini, and slice the carrots.", "Add the onion to the second cooking pan and stir for about five minutes.","Add the zucchini, wait five minutes, then add the carrots.","Add the bean sprouts.","When everything is cooked add the beef and the veggies to the pot with the noodles.","Add the soy sauce and stir."];
			
			
			var recipe=new Object ();
			recipe.id = 9;
			recipe.type ="Fish";
			recipe.title ="Salmon with couscous";
			recipe.ingredients = ["Lemon juice 1 ", "Olive oil 2tbsp", "Salt and pepper","Skinless salmon 		fillets 2 150g-175g each","Lemon, mint and parsley couscous 100g", "Rocket leaves 20g","Light mayonnaise 	2tbsp"];   recipe.instructions = ["To make the marinade, combine lemon juice and 1 tbsp of oil.","Add salmon fillets and turn twice ensuring coating is all over.","Cover and marinate for 15-20 minutes.",
"Preheat overn to 220C.","Drizzle remaining oil into a roastin tin.","Drain salmon and put into tin.","Roast for 15-20 minutes until salmon is starting to go crisp.","Put couscous into bowl, add boiling water.","Leave to stand for 5 mintues to absorb water.","Plate couscous on plate, rocket leaves.","Add mayonnaise if required."];

	var recipe=new Object ();
			recipe.id = 10;
			recipe.type ="Fish";
			recipe.title ="Prawn Wraps";
			recipe.ingredients = ["Soft cream cheese 200g ", "Snipped chives 3tbsp", "Peeled prawns 175g","Tabasco sauce","Tortillas 4", "Plum tomatoes 3 sliced thin","Rocket leaves 50g", "Watercress 50g"];   			
			recipe.instructions = ["Put cream cheese into bowl and beat with fork.","Add chives, prawns and season with tabasco sauce (if required).","Dividing the cheese, spread over each tortilla.",
"Sprinkle tomato strips over  equally.","Scatter rocket leaves and watercress.","Roll up each tortilla tightly.","Recipes can be adapted to chicken, beef and pork."];
			
			
			
				var recipe=new Object ();
			recipe.id = 11;
			recipe.type ="Specific";
			recipe.title ="Crunchy bacon salad";
			recipe.ingredients = ["Extra virgin olive oil 1tbsp", "Focaccia 75g", "Bacon lardons 110g","Garlic 2 cloves, peeled and chopped","Mixed salad leaves 50g","Lime 1, juice","Salt and pepper"];   			
			recipe.instructions = ["Heat the oil in a large frying pan.","Add bacon and cook for 5 minutes.","Add focaccia and continue cooking, for another 5 minutes until bread is crispy.",
"Add girlic and stir for a few minutes.","Arrange mixed salad leaves on a plate.","Scatter hot bacon over top.","Drizzle with extra olive oil, salt and pepper and lime juice."];
			
					var recipe=new Object ();
			recipe.id = 12;
			recipe.type ="Specific";
			recipe.title ="Jacket Potatoes With Tuna";
			recipe.ingredients = ["Baking potatoes 2", "Olive oil 2 tsp", "Salt and pepper","Tuna chunks 185g","Light mayonnaise 3-4 tbsp","Lime 1, juice","Mixed salad leaves"];   			
			recipe.instructions = ["Preheat oven to 200C/400F.","Put potatoes in small roasting tin, prick several times.","Drizzle with a teaspoon of olive oil.","Sprinkle salt and pepper.","Bake until potatoes are tender, usually about 1 hour.","Mix tuna with mayonnaise.","Season with lime and salt and pepper.","Divide cooked potatoes, add tuna mix.", "Serve with mixed leaves."];
			
			
				var recipe=new Object ();
			recipe.id = 13;
			recipe.type ="Specific";
			recipe.title ="Tomato Frittata";
			recipe.ingredients = ["Eggs 6 large", "Sun-dried tomatoes 8", "Parmesan-style cheese 50g","Olive oil 2 tbsp","Onion 1, peeled and sliced","Tomato salad"];   			
			recipe.instructions = ["Preheat grill.","Break eggs whisk briefly.","Add sun-dried tomatoes and parmesan cheese and mix together.","Heat oil  in pan.","Add onion and cook for 5 minutes.","Pour egg mix into pan and stir.","Cook over a medium heat, until base is golden.","Slide pan under grill until golden on top.","Plate up with option of salad or wedges."];
			
				var recipe=new Object ();
			recipe.id = 14;
			recipe.type ="Specific";
			recipe.title ="Spag Bowl";
			recipe.ingredients = ["Olive oil 1/2 tbsp","Onion 1 diced","Garlic clove 1 crushed","Mince 500g","Carrot 1 sliced","Red pepper 1 cubed", "Mushrooms 250g","Tin tomatoes 1", "Tomato puree 1/2 tube","Bay leaves 2-3", "Salt and pepper","Spaghetti to serve",];   			
			recipe.instructions = ["Heat oil in a pot and fry onions and garlic.","Brown mince removing any excess fluid.","Add vegetables and cook for a minute.","Add salt and pepper  and stir thoroughly.","Add tinned tomatoes,puree and bay leaves and stir thoroughly.","Bring to the boil.","Leave to simmner fo 50 minutes - hour.","Serve with spaghetti and garlic bread."];
			
		
							alert(recipe.type);

				tx.executeSql('INSERT INTO recipe (id,type, title, recipe) VALUES (?,?,?,?)',  [recipe.id, recipe.type, recipe.title,recipe]);
			
				
        	});
			
			db.transaction(function (tx) {
  				tx.executeSql('SELECT * FROM recipe', [], function (tx, results) {
  				var len = results.rows.length, i;
  					for (i = 0; i < len; i++) {
    				alert(results.rows.item(i).type);
 					}
					}); 
			});
			
			//Database transactions are asynchronous. 
			//That means that normally this loop would continue to loop over each car 
			//without waiting for the database to write the record. 
			
			//By the time the transactions are being undertaken the loop has finished 
			//and the looping variable, i, has hit its maximum so only the last car is written. 
			
			//One way to fix this problem is to place the transaction in something called an anonymous function.
			//where 'i' is passed as a parameter to the function
			
      		/*(function(i) {
        		db.transaction(function (tx) {  
               	tx.executeSql('INSERT INTO type (type, recipe) VALUES (?,?,?)',  [i, cars[i].model, cars[i].colour]);
        		});
      		});
    	};


		//This defines the data binding using Ractive.js
		var ractive = new Ractive({
            el: 'recipe',
            template: '#myTemplate',
            data: { recipelist: recipe}
        });
*/

	</script>

</body>
</html>
